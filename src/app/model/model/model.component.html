<form>
  <mat-card class="card">
    <mat-card-content>
      <div class="spinner" *ngIf="loading" fxLayoutAlign="center center">
        <mat-spinner></mat-spinner>
      </div>
      <div *ngIf="!loading" class="tab">
        <button mat-raised-button color="primary">Add field</button>
        <mat-tree [dataSource]="model" [treeControl]="treeControl">
          <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
            <li>
              <button
                mat-icon-button
                matTreeNodeToggle
                [attr.aria-label]="'Toggle ' + node.name"
              >
                <mat-icon>{{
                  treeControl.isExpanded(node) ? "expand_more" : "chevron_right"
                }}</mat-icon>
              </button>
              {{ node.name }}
            </li>
          </mat-nested-tree-node>
        </mat-tree>
      </div>
    </mat-card-content>
    <mat-card-footer *ngIf="!loading">
      <button
        mat-raised-button
        class="full-width"
        color="primary"
        (click)="save()"
      >
        Save
      </button>
    </mat-card-footer>
  </mat-card>
  <form></form>
</form>
